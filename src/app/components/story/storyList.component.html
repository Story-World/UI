<div class="container-fluid" style="text-align: center; padding-top: 2%">

	<div class="row-fluid" style="text-align: left">
		<h1>
			{{ 'LSTSTR' | translate:param }}
		</h1>
	</div>

	<div class="row-fluid col-md-12" style="padding-bottom: 1% !important">
		<form (ngSubmit)="search()" #searchForm="ngForm" class="form-inline">
			<div class="col-md-9 form-group" style="padding: 1% !important">
				<input name="text" type="text" class="form-control" placeholder="{{ 'SEARCH_STORY' | translate:param }}" required [(ngModel)]="text" style="width: 100%">
			</div>
			<div class="col-md-1 form-group" style="padding: 1% !important">
				<button class="btn btnGreen" type="submit" [disabled]="!searchForm.form.valid" style="width: 100%">
					{{ 'SEARCH' | translate:param }}
				</button>
			</div>
			<div class="col-md-1 form-group" style="padding: 1% !important">
				<button class="btn btn-danger" (click)="reset()" type="reset" [disabled]="!searchForm.form.valid" style="width: 100%">
					{{ 'CLEAR' | translate:param }}
				</button>
			</div>
			<div class="col-md-1 form-group" style="padding: 1% !important">
				<button class="btn btn-primary" (click)="showFilters()" type="reset" style="width: 100%">
					{{ 'FILTER' | translate:param }}
				</button>
			</div>
		</form>	
	</div>

	<div *ngIf="this.filters" class="row-fluid col-md-12" style="padding-bottom: 1% !important">
		<div class="container-fluid">
			<div class="row-fluid">
				<h2>
					{{ 'FILTERS' | translate:param }}
				</h2>
			</div>
			<div class="container-fluid" style="text-align: left">
				<div class="row">
					<div class="col-md-3">
						<label for="storyType">Type</label>
						<ss-multiselect-dropdown [options]="myOptions" [(ngModel)]="optionsModel" [settings]="mySettings" [texts]="myTexts">
						</ss-multiselect-dropdown>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container-fluid col-md-12" style="padding: 1% !important">

		<div class="row">

			<div class="col-md-2 col-xs-12" style="text-align: left; padding: 1% !important;">
				{{ 'SHOW' | translate:param }} {{ this.stories.length }} {{ 'STORIES' | translate:param }}
			</div>

			<div class="col-md-10 col-xs-12" style="text-align: right; padding: 1% !important">
				<div class="row">

					<div class="col-md-4">
						{{ 'SORT' | translate:param }} 
						<ss-multiselect-dropdown [options]="myOptionsSort" [(ngModel)]="optionsModelSort" (ngModelChange)="onChangeSort($event)" [settings]="mySettingsSort" [texts]="myTexts">
						</ss-multiselect-dropdown>
					</div>

					<div class="col-md-4">
						{{ 'PAGSIZE' | translate:param }}
						<select class="dropdown-toggle btn btn-default btn-secondary" placeholder="SIZE" style="width: 70%">
							<option [value]=""></option>
							<option [value]="size" *ngFor="let size of sizes">{{size}}</option>
						</select>
					</div>

					<div class="col-md-4" style="text-align: right !important">
						<ul class="pagination justify-content-end">
							<li *ngIf="this.page==1" class="page-item disabled">
								<a class="page-link">Previous</a>
							</li>
							<li *ngIf="this.page!=1" class="page-item">
								<a class="page-link" (click)="nextPage(-1)">Previous</a>
							</li>
							<li *ngFor="let indexPage of this.elementOfPages" class="page-item" [class.active]="this.page==indexPage	">
								<a *ngIf="this.page!=indexPage" class="page-link" (click)="changePage(indexPage)">{{indexPage}}</a>
								<span *ngIf="this.page==indexPage" class="page-link">
									{{indexPage}}
									<span class="sr-only">(current)</span>
								</span>
							</li>
							<li *ngIf="this.page<this.numberOfPages" class="page-item">
								<a class="page-link" (click)="nextPage(1)">Next</a>
							</li>
							<li *ngIf="this.page==this.numberOfPages" class="page-item disabled">
								<a class="page-link">Next</a>
							</li>
						</ul>
					</div>

				</div>
			</div>

		</div>
	</div>

	<table class="table table-hover">
		<thead>
			<tr>
				<th>{{ 'STORY.NAME' | translate:param }}</th>
				<th>{{ 'STORY.DESC' | translate:param }}</th>
				<th>{{ 'STORY.AUTH' | translate:param }}</th>
				<th>{{ 'STORY.ACT' | translate:param }}</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let story of stories" style="text-align: left; word-break: break-all;" routerLink="/story/{{ story.id }}">
				<td>
					<div>
						{{ story.name }}
					</div>
					<div>
						<input id="input-1" name="input-1" class="rating rating-loading" data-min="0" data-max="5" data-step="1">
						{{ story.avgRate }}
					</div>
				</td>
				<td>{{ story.description }}</td>
				<td>{{ story.author.name }}</td>
				<td>
					{{ 'EDIT' | translate:param }} {{ 'REMOVE' | translate:param }}
				</td>
			</tr>
		</tbody>
	</table>

</div>